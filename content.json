{"meta":{"title":"FinLab 量化實驗室","subtitle":"用統計、回測的方式教你如何買股票","description":"新手如何買股票？網路上一堆教學，到底誰說了算？股海茫茫如何撈股票？我會利用財報、股價等統計資訊幫助投資人在買股票時做出正確的判斷！","author":"koreal6803","url":"https://koreal6803.github.io"},"pages":[{"title":"關於","date":"2017-10-01T12:36:01.000Z","updated":"2017-10-03T14:35:23.000Z","comments":true,"path":"關於/index.html","permalink":"https://koreal6803.github.io/關於/index.html","excerpt":"","text":"FinLab的理念FinLab，聽起來很學術，但內容非常實際，一般報章雜誌上看不到的技巧，看不到的統計結果，在這邊完全不私藏，通通秀給大家看！ 以為這樣就結束了嗎？往後的文章也會讓各位創造屬於自己的策略，並且有能力照顧自己的財產，不用在外買明牌被坑。 一般財經平台，有網站前端、後端、軟體人員、業務、財經專家，部落格小編，大家買他們的程式、社團的錢，有很大的部分都是花在他們的人力成本，最重要的是都花大錢了，有時候還是無法獲利。 FinLab讓大家0成本複製我這兩年在財經的路上所學到的東西。 根據統計，世界上有80％的人不喜歡自己的工作，假如你也是其中之一的話，更應該懂得理財，讓自己不再為錢庸碌，活出自己的人生！ 創這個blog的動機為什麼會踏上這條路？可以其實原本想來玩玩大數據，順便學習理財的概念，其實人的志向，一直都不是啊哈！一下突然就繃出來了，一定是自己的投入後，有了小小的成就，又使你更投入，這樣一個不斷循環的過程。 假如遠在天邊的上帝手上有張手牌，上面寫著成功或失敗，創業就是窮極一切爬到祂的腳邊，把祂手裡的那張牌翻開看一下，這樣就足夠了！","raw":null,"content":null}],"posts":[{"title":"利用Machine Learning 選股新手教學","slug":"利用Machine-Learning-選股新手教學","date":"2017-10-20T10:58:23.000Z","updated":"2017-10-20T13:10:09.000Z","comments":true,"path":"利用Machine-Learning-選股新手教學/","link":"","permalink":"https://koreal6803.github.io/利用Machine-Learning-選股新手教學/","excerpt":"","text":"最近一直在弄Machine Learning，都快忘記寫blog了，哈！ 其實要machine選股真的很簡單！這篇blog就會帶大家從頭開始，用最簡單的方式，將Machine Learning實做！ 1. 取得資料只要寄到我的信箱，就會還傳給你一個data.csv檔案，裡面就是training的資料，這個只能用於學術研究，請勿用於商業用途。 為什麼要這麼麻煩？！不能直接把連結公布於網站上就好了嗎？絕對沒有要收集email的意思，最主要是因為，這資料的來源比較複雜。 2. 架設環境假如你已經會使用python了，那可以直接跳過這個步驟，假如不會的話，可以照著下面的步驟完成： 到官網下載Python3，並且安裝 安裝pip 安裝virtualenv 為何要安裝pip呢？pip可以幫我們下載Machine Learning所需要的package（也就是python的libraries）。 為何要安裝 virtualenv 呢？virtualenv可以幫你產生project的環境，每一個project用自己的libraries，這樣比較不容易有衝突。 3. 建置project首先，先用virtualenv創建projectcreate project12virtualenv finance_mlcd finance_ml 接下來必須要開啟工作環境，activate and deactivate project12source bin/activatedeactivate 這邊有兩行，一行是開啟環境，一行是結束環境！假如你還要繼續，先不要輸入第二行。將data.csv複製到當前資料夾，並且安裝python packages install python packages1234pip install jupyterpip install pandaspip install sklearnpip install matplotlib 4. 開工！首先就是開啟jupyter notebook，並開一個python的環境start notebook1jupyter notebook這樣會開啟一個網頁版的GUI介面，只要新增python的notebook就可以用了！接下來進入我們的主題：機器學習程式碼！ A. 讀入資料這邊我們用 pandas 讀入所需要的資料，index_col可以設定要哪一個columns當作index。這邊的index選擇在 data.csv 中，第一個未命名的column。read data12import pandas as pddata = pd.read_csv('data.csv', index_col='Unnamed: 0') B.處理資料我們將資料分成三類，一類是跑回測用的dbacktest，另一類是機器學習用的dtraning，另外一個是traning完用來評估的dtest。 process data1234567891011121314from sklearn.model_selection import train_test_split# clear data 將爛資料去掉data.dropna(how='any', inplace=True)# 選擇2015年以後的資料作為回測用dbacktest = data[data['buy_date'] &gt; '2015']# 將其於的資料再分成兩類：dtrain 跟 dtestdataTrainTest = data[data['sell_date'] &lt; '2015']dtrain, dtest = train_test_split(dataTrainTest, test_size=0.10, random_state=42)# 設定我們的feature要用哪些features = data.columns[5:-1] C. 機器學習訓練資料這邊我們用很簡單的隨機森林，來完成的，可以參考連結來學習怎麼樣調整參數，這應該算是機器學習中，前製作業模型了！ learning1234567891011121314from sklearn.ensemble import RandomForestClassifier# 創建機器學習的modelrf = RandomForestClassifier(n_estimators=10, criterion='gini', max_depth=None, min_samples_split=2, min_samples_leaf=1, min_weight_fraction_leaf=0.0, max_features='auto', max_leaf_nodes=None, bootstrap=True, oob_score=False, n_jobs=1, random_state=None, verbose=0, warm_start=False, class_weight=None)# 分類能 獲利 &gt; 10％ 的股票rf.fit(dtrain[features], dtrain['獲利'] &gt; 1.1) D. 結果你說這樣就結束了！？對呀結束了。其實machine learning要簡單真的就只是這樣而已！接下來我們來看一下它預測的准不準： predict123456789101112131415result = rf.predict(dtest[features])print('test data')print('gain before filtered', dtest['獲利'].mean())print('gain after filtered', dtest['獲利'][result].mean())print('num stocks', sum(result), '/', len(dtest))result = rf.predict(dbacktest[features])print('backtest data')print('gain before filtered', dbacktest['獲利'].mean())print('gain after filtered', dbacktest['獲利'][result].mean())print('num stocks', sum(result), '/', len(dbacktest)) 假如一切順利就會看到以下結果： 這邊的gain是指平均的報酬率，也就是所有股票的價格在賣出時是否賺錢，小於一就是虧，大於一就是賺。結果看起來還滿猛的！竟然有接近7%的報酬率！但真的是如此嗎？我們把它畫成隨著時間，本金成長的圖：backtest1234567891011%matplotlib inlinedbacktest['預測'] = pd.Series(result, index=dbacktest.index)dates = list(set(dbacktest['buy_date']))dates.sort()history = []for d in dates: history.append(dbacktest[dbacktest['buy_date'] == d]['獲利'].mean()) pd.Series(history, index=dates).cumprod().plot() 發現其實沒有想像中那麼好。這是意料之中的結果，畢竟我們的learning時間才幾秒鐘，假如增加n_estimator這個變數，是否可以讓結果更好？假如使用Regression會不會更好？假如改變一下機器學習的參數、或修改一下features，是否可以選到更好的股票呢？就留給各位慢慢玩！以下是可以改進的地方： feature engineering：將features做修正、刪除、normalize等 篩選能獲利X%的股票 classification vs regression：可以兩種都試試看 不同的model，可以試試SVM、NN、XGBoost等等 不同的model都有可以調整超多參數來達到優化 利用early stop 來預防overfitting。 我只是列出最基本的，還有很多可以玩的，這也是我這禮拜正在弄的東西，害我都沒時間寫網誌XDD 假如你有意外的發現，可以聯絡我，我可以幫你架設一個選股平台，我們再來討論怎麼分潤之類的，但前提是結果必須要比我的好才行XDDD。","raw":null,"content":null,"categories":[],"tags":[{"name":"機器學習","slug":"機器學習","permalink":"https://koreal6803.github.io/tags/機器學習/"},{"name":"Machine Learning","slug":"Machine-Learning","permalink":"https://koreal6803.github.io/tags/Machine-Learning/"},{"name":"python","slug":"python","permalink":"https://koreal6803.github.io/tags/python/"}]},{"title":"Machine Learning 表示：看季線最無用！","slug":"Machine-Learning-表示：看季線最無用！","date":"2017-10-15T16:10:12.000Z","updated":"2017-10-16T13:23:42.000Z","comments":true,"path":"Machine-Learning-表示：看季線最無用！/","link":"","permalink":"https://koreal6803.github.io/Machine-Learning-表示：看季線最無用！/","excerpt":"","text":"最近喜歡做 machine learning 的預測，發現機器學習看財報，預測下季收盤價還滿準的。 Alpha Go 讓人類的圍棋可以到達新境界，機器學習中學習到一些它判斷財報的方法，今天來剖開上一篇教學中，機器學習的大腦，來看一下機器人如何選股！ Machine Learning：季線無用！機器學習的模型就像是一個黑盒子，很難知道他其中的工作原理，只能看到線性化後，每個feature的權重。發現了一個很有趣的狀況，就是 “股價在季線上” 這個條件，權重超低！ 假如你買賣股票也跟我的模型一樣，是根據每一季財報來決定，那機器學習的結果，表示不用看季線，因為幾乎沒啥用。 看季線還不如看近10週收盤價！發現把週收盤價納入參考，也可以增進效果。代表長線的技術指標是有用的！ 重要的財報數據以下features的重要程度按順序排列： 月營收增長率很重要，而且不能只看一個月！ 當季ROE跟去年同季ROE很重要！ EPS季增長率也很重要！ 總資產轉換率 較不重要，但也不賴啦！ 其它，重要程度：股價淨值比 = 負債比率 &gt; 本益比 = 殖利率 週收盤價比上面的難用，但好像可以判斷一些東西，但一定是非線性的，所以不知道其中原理XD 重要程度趨近於0的：收盤 &gt; 季線 真的很少網站可以像這裡一樣，告訴你哪些是比較有用的數據，哪些比較難用，我們真的要跟機器來學習，一般人都會認為股價淨值比、本益比是最重要的，但是這邊做出了一個不一樣的結論：營收是否增加才是股票漲跌的關鍵。 這樣做的用意只是給大家一個概念，也不代表機器學習的結果就得奉為聖旨。 機器學習評分財報機器學習模型最後會幫每個股票評分，總共100分，最低0分，50分就是他覺得股票不漲不跌，所以我們將每季評分分成四組，由低到高： 可以看到有很多的評分都在0分跟100分，因為分數算法的關係，100分的部分可以想成超過一百分！（國軍online） 之後會在將 0 跟 100 分再區分清楚一點～ 回測！接下來我們將分數由低到高分4組，分別回測： 報酬率由低到高很漂亮的一字排開！分數低果然很差，而分數高真的很好。可以看到50分以上的兩組，其獲利贏過大盤（黃色），而50以下的兩組，其獲利小於大盤。 財報好的公司，抗跌！資優生組別（灰色）幾乎每季都漲！唯一一次跌是在2015年中，當時大盤大跌，但資優生那組並沒有跌非常多。 穩定的報酬率大盤三年1.05倍，而高分財報組1.75倍，平均報酬率20％每年。 別用這個策略亂放空！從上圖也可以看到一個現象：不要亂放空，不然會慘慘的。就算財報在爛，最差的那組還是沒辦法一直跌，但財報最好的那組可以漲很多！ 這裡用2015年以前的資料訓練，2015年以後拿來回測，所以這個應該就會是實際策略上線的狀況！（理論上XDD） 接下來會閉關幾天，把這個策略放在雲端，大家都可以去使用！","raw":null,"content":null,"categories":[],"tags":[{"name":"機器學習","slug":"機器學習","permalink":"https://koreal6803.github.io/tags/機器學習/"},{"name":"Machine Learning","slug":"Machine-Learning","permalink":"https://koreal6803.github.io/tags/Machine-Learning/"},{"name":"python","slug":"python","permalink":"https://koreal6803.github.io/tags/python/"},{"name":"選股","slug":"選股","permalink":"https://koreal6803.github.io/tags/選股/"}]},{"title":"讓Machine Learning幫你看財報！","slug":"讓Machine-Learning幫你看財報！","date":"2017-10-13T10:07:13.000Z","updated":"2017-10-15T21:12:33.000Z","comments":true,"path":"讓Machine-Learning幫你看財報！/","link":"","permalink":"https://koreal6803.github.io/讓Machine-Learning幫你看財報！/","excerpt":"","text":"機器學習不是我很專攻的領域，但幸好現在很多強大的package，可以直接使用，假如你不想深入開發model的話，只要把它當作黑箱子就好了，把它插上插頭，讓資料流進去、流出來。很簡單！ 可以私下聯絡我，或留言給我email來拿到訓練資料，在坊間一定是要賣錢的，甚至連課程一起賣，一定會打著python、財經、大數據、機器學習、神經網路 等名號開課，一堂課5000元之類的。 但我想說算了啦，反正我就是個草根碼農XDD，希望大家可以一起互相切磋。 之前寫的策略，選股方式都是用條件拼湊的： $$\\mathbb{S}=\\left\\{ s\\mid\\text{ROE}_{s}>3\\text{ and }\\text{PB}_{s}但是現在用machine learning的話，就會寫成這樣： $$\\mathbb{S}=\\left\\{ s\\mid f(\\text{ROE}_{s},\\text{PB}_{s})=1\\right\\}$$ 這邊用的是分類（classification），假如覺得會上漲，就是1，會下跌就是0。上面的$f$ 就是機器學習的model，我們不太知道這個是個怎樣的函數，因為這個model不是一個公式，而是經過資料訓練而來的。這個簡單的範例只有2個features：ROE、PB。只是一個例子而已，下面會有更多的features： 資料資料是從2010年底，到2017年，每次財報截止的隔天買入，並在下次財報截止前賣出。至於features就是用之前寫文章，覺得好用的： 月營收 買入前12個月 ROE 買入前12季財報 本益比 買入前一天 股價淨值比 買入前一天 殖利率 最近一期 股價是否大於季線 股價是否大於半年線 負債比率 買入前12季財報 可以到這裡下載歷史資料，假如有人訓練的比我的好的話（應該滿簡單的），歡迎一起討論，我們可以一起合作建構一個初版的平台，或是有人想要train不同的feature，也歡迎留言給我。 除了上述的features，每筆資料還包含： stock_ID 股票的代號 buy_date 買入日期 buy_price 買入開盤價 sell_date 賣出開盤價 sell_price 賣出價格 gain 賣出價/買入價 不確定這些歷史數據，有沒有錯，假如不放心，可以幫我稍微檢驗一下，另外，關於買賣日期，我是參考IFRS制度上市前後不同的財報截止日，然而有些企業遲交財報，就沒辦法了…所以會包含一點未來數據。 這篇文章有講到財報遲交的公司，還是別買的好，而每年大約只有100檔家公司會遲交財報，以整體資料而言，未來數據應該不會太多（我覺得啦XD，但不知道資料科學家們怎麼看就是了）。 資料僅供學術發展，請勿用於商業用途！ 訓練model的方式由於我想要弄一個快速的prototype，所以先使用random forest model，這樣就不用proprocessing了XDD Model12from sklearn.ensemble import RandomForestClassifierrf = RandomForestClassifier(n_estimators=500, max_leaf_nodes=None, class_weight='balanced') 以上是用sklearn裡的模型，連參數什麼都沒給，這樣的效果還OK了。訓練時，training data使用2014年以前的資料，而test data是2015年以後的資料 結果太好了，我不敢相信…以下是還沒篩選前的獲利分佈圖，這邊的獲利是用倍數來衡量，也就是 賣出價格/買入價格。可以看到，這是一個對稱於1的分佈圖，大於1（賺）跟小於1（賠）其實很接近，其平均值是在1.005左右，你有看到一藍藍的地方嗎？那就是篩選後的標的： 下面我們把藍色的地方直接畫一張圖，可以發現篩選後，發現結果好很多，分佈偏向大於1，也就是很多的選擇是有獲利的！ 平均來到了1.10左右，代表每季買一群股票，平均來說會賺10％左右。且勝率來到了70.2% 對於這樣的結果，我感到有點難過，因為成果太好代表裡面一定有什麼問題，我還是抱著懷疑的態度，各位可以做最嚴格的檢驗，機器學習不是我的範疇，願意虛心受教，或是你還希望有什麼額外的features呢？我幾乎都可以幫你生成客製的test data喔！","raw":null,"content":null,"categories":[],"tags":[{"name":"機器學習","slug":"機器學習","permalink":"https://koreal6803.github.io/tags/機器學習/"},{"name":"Machine Learning","slug":"Machine-Learning","permalink":"https://koreal6803.github.io/tags/Machine-Learning/"},{"name":"python","slug":"python","permalink":"https://koreal6803.github.io/tags/python/"}]},{"title":"回測框架介紹","slug":"回測框架介紹","date":"2017-10-12T11:39:12.000Z","updated":"2017-10-12T18:45:37.000Z","comments":true,"path":"回測框架介紹/","link":"","permalink":"https://koreal6803.github.io/回測框架介紹/","excerpt":"","text":"每次回測的時候，大家一定會有疑問，雖然已經寫了選股的條件，但實際上到底是怎麼運作的？這篇文章會介紹這個回測的方式。這篇比較數學一點，但用這種方法表示會比較明確，有線性代數的基礎就夠了。 首先我們先假設營業日，從1到$n^{d}$天，代表所有回測的天數： $$d=1,…,n^{d}$$ 另外還有一群股票，是我們可能買入的對象 $$s=1,…,n^{s}$$ 另外，而選股條件(constraints)叫做 $$c(d,s)\\in\\{0,1\\}$$ 假如某日 $d$ ，我們發現 $s$ 股票符合條件，那我們可以說$c(d,s)=1$，假如不符合條件，就是$c(d,s)=0$ 為了方便，我們用一個向量來表示第 $d$ 天每支股票是否符合條件： $$\\boldsymbol{c}_{d}=[c(d, 1),…,c(d, n^s)]^T$$ 然而我們只希望每 $n$ 天換一次手上的持股，不要每天都換，不然會花太多手續費，所以我們定義一個過 $n$ 天才檢查一次股票是否符合條件： $$\\boldsymbol{c}_{d}^{*}=\\boldsymbol{c}_{\\left\\lfloor d/n\\right\\rfloor +1}$$ 於是，我們在$d$天晚上，用 $\\boldsymbol{c}_{d}^{*}$ 來決定明天如何買股： $$\\boldsymbol{h}_{d+1} = \\left(\\frac{m+\\boldsymbol{h}_{d}^{*T}\\boldsymbol{p}_{d}}{\\text{sum}(\\boldsymbol{c}_{d}^{*})}\\boldsymbol{c}_{d}^{*}\\right)^T$$ 其中，$\\boldsymbol{h}_{d+1}$ 代表明天每支股票要分多少錢， $\\boldsymbol{h}_{d}^{*T}$ 代表今晚持股（單位為一張），而 $m$ 為帳戶資金 $\\boldsymbol{p}_{d}$ 代表收盤價乘以1000。其實它只是看起來醜了點，概念很簡單，計算所有的資產，並且將資產平均分配給符合條件的股票。 以上的持股方式，就是一種完美分散的概念，是美好的想像，通常是blog中回測權益曲線的藍線，但現實生活中，資產不可能分散得如此完美，所以還必須算出可以買幾張股票： $$\\boldsymbol{h}_{d+1}^{*}=\\left[\\left\\lfloor \\frac{h_{d+1,1}}{1.1p_{d,1}}\\right\\rfloor ,...,\\left\\lfloor \\frac{h_{d+1,n^{s}}}{1.1p_{d,n^{s}}}\\right\\rfloor \\right]^{T}$$ 這邊有點要注意，$\\boldsymbol{h}_{d+1}^{*}$ 的單位是張數，而原本的 $\\boldsymbol{h}_{d+1}$ 的單位是投資金額。乘以 1.1 是為了在開盤時用漲停板買入。然而這條公式每天都會計算，所以在歷史回測中，每天的張數是浮動的，也就是說，某天我買了6張某股，隔天我可能會變成5張、或7張某股，都是有可能的。 考慮了張數的，更貼近真實情況，通常是blog中回測權益曲線的紅線。 目前所知道的缺點 長線還算堪用，但短線上這種直接平分資產的方式，手續費還是太高了，到底要怎麼降低手續費呢？有沒有辦法不要單純平均分散？可以做到智慧型的平均分散？ 這個方法並沒有資產利用最大化（因為無條件捨去法），有沒有讓資產最大化、又可以考慮手續費的選股函數呢？","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[]},{"title":"財報狗選股讓你免費取得價值4000元/年的策略","slug":"財報狗選股條件最佳化","date":"2017-10-11T17:17:45.000Z","updated":"2017-10-15T21:00:52.000Z","comments":true,"path":"財報狗選股條件最佳化/","link":"","permalink":"https://koreal6803.github.io/財報狗選股條件最佳化/","excerpt":"","text":"今天滿認真的，幫大家排列組合選股條件，這些選股條件都可以從財報狗的網站免費取得。 基本上這個策略，結果跟CMoney的富貴滿盈價值股差不多，但是人家一年要將近4000元，而財報狗是完全不用錢！ 財報狗的選股條件，自己排列組合可能會很慘，我用程式幫大家找，可以看到歷史績效，可能會比較可靠一點！ 分享目前自己發現最好，且可以用財報狗選股網站，免費選出股票的策略～ 免費的東西最貴？免費的東西真的很貴，假如你不靠任何投資老師，不靠長輩指導，短時間學會如何買股票，並能穩定獲利，基本上不太可能。（除非你也寫程式XD） 另外一個方式就是多來這晃晃XDDD（推銷）今天就來打破這個概念，從免費垃圾中挖出寶！把財報狗所有條件排列組合，自己能力所及，產生的最好回測，重點是免費！ 回測的心得我發現，財報狗條件，最主要就是選擇好公司，然而好公司股價不一定便宜，所以另外要用本益比跟股價淨值比來篩選出便宜股。 另外也發現本益比不是越小越好，這個策略調成15倍以下，再低就不行了，會造成波動變大，但是股價淨值比，可以調到1以下，結果還是不錯！ 假如股票數目太多，可先挑股價淨值比小的，可能會比較好！（只是推測）但假如不想要深入研究每支股票，大前提一定是盡量分散，不然就得認真研究公司的體質！ 回測方法這個策略所用到的條件（財報狗都有）： EPS近五年成長率 &gt; 1.1 ROE近四季總和 &gt; 0 流動比率1年 &gt; 200 近5年EPS &gt; 0 本益比 &lt; 15 股價淨值比 &lt; 1.5 另外，我測試了60天跟120天的，發現差不多，所以大約半年換股一次就可以了以下是回測結果，紅色是用100萬當起始資金，並考慮手續費、減資、利息，主要是以逼近藍色的選股策略為準，盡量平均分散，最小單位1張： 可以發現金融海嘯的時候，還是很可怕，海嘯完反彈也很猛！但是照這樣投資，2009年心臟要夠大顆，因為100萬就這麼沒了… 除非你的策略天生可以躲避大盤，不然一定要做大盤的篩選！之後也想寫一些預測大盤的策略，大家不妨偶爾來拜訪一下這個部落格。 接下來來看股票數： 有時候要買到75張不同的股票，大家應該都沒有這麼多財力吧XD，有時候覺得自己的blog根本是為了有錢人寫的？XD其實我也不想…但本金夠真的比較好買股票。 小提醒有些地方我好像定義的跟財報狗不太一樣，例如：一年ROE，我是用4季去加總的，可能會有點誤差，畢竟我也不在財報狗裡面上班XDD，但結果應該差不了太多。 結語那！今天分享了一個可以模仿的策略了，歡迎其它人來檢查一下，這樣的策略是否能夠獲利，畢竟我是工程師，工程師的程式裡，一定會有bug。。。歡迎大家來找碴！ 今天從頭到尾，花了2個小時才寫完的，假如喜歡我的部落格，可以加一下我的最愛，每個禮拜都有兩三篇新文章喔！（不敢再說每天，上週末已破功XDD）","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"選股策略","slug":"選股策略","permalink":"https://koreal6803.github.io/tags/選股策略/"}]},{"title":"教你用財報狗巴菲特免費選股","slug":"教你用財報狗巴菲特免費選股","date":"2017-10-10T21:51:50.000Z","updated":"2017-10-11T23:41:12.000Z","comments":true,"path":"教你用財報狗巴菲特免費選股/","link":"","permalink":"https://koreal6803.github.io/教你用財報狗巴菲特免費選股/","excerpt":"","text":"今天來試試看財報狗的巴菲特選股條件，由於是免費的，任何人都可以使用他們的工具來篩選股票喔！用起來很方便，但是沒有歷史回測，不知道要怎麼選才好？繼續往下看吧！ 總共有九種條件、三個三個一組 但一眼看過去就知道，就算這九個全選，還是會有問題：無法選出便宜股！ 沒差，今天就是給大家一個感覺，想說將 3 x 3 x 3 = 27種 回測都跑一遍，來看一下哪些條件適合幾年！ 回測方法回測每60天重新篩選一次股票，當即將減資時，會賣出股票，等到減資完才買回（方便做回測），假設資產平均分散，不計算手續費，以下是2010年到現在的獲利： 負債比率n年小於30％ ROE近n年大於15% 自由現金流n年大於0 2010到至今結果 1 1 1 1.81 1 1 3 1.74 1 1 5 1.76 1 3 1 1.83 1 3 3 1.80 1 3 5 1.76 1 5 1 1.99 1 5 3 1.97 1 5 5 1.91 3 1 1 1.98 3 1 3 1.93 3 1 5 1.92 3 3 1 2.04 3 3 3 2.00 3 3 5 1.94 3 5 1 1.84 3 5 3 1.82 3 5 5 1.75 5 1 1 2.00 5 1 3 1.95 5 1 5 1.94 5 3 1 2.07 5 3 3 2.12 5 3 5 2.06 5 5 1 1.80 5 5 3 1.83 5 5 5 1.77 同期大盤 1.26倍 結論以下是我的觀察： 負債比率：越多年越有效 ROE：沒有趨勢 自由現金流：越多年越有效，但效果較不明顯 然而只看這三種不同類型的條件，還是很難找到好的策略。明天來看看其它的條件，能不能幫大家組合出好策略！不知道大家有什麼想法？","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"選股策略","slug":"選股策略","permalink":"https://koreal6803.github.io/tags/選股策略/"}]},{"title":"價值股策略","slug":"價值股回測","date":"2017-10-09T14:31:56.000Z","updated":"2017-10-10T16:39:43.000Z","comments":true,"path":"價值股回測/","link":"","permalink":"https://koreal6803.github.io/價值股回測/","excerpt":"","text":"今天剛結束期中口試（資格考），在法國99％的博士班，都可以通過，但重點是通過成績如何。今天總算是落幕了！可以好好來寫網誌，但今天還是有點想要休息一下，所以把網路上的方法拿來回測XD 富貴滿盈價值股今天回測了 富貴滿盈價值股 這個方法，名稱有點俗氣，但是回測效果算還不錯。 以下是此策略的選股條件： 本益比 &lt; 15 股價淨值比 &lt; 2 殖利率 &gt; 4 成交量大於50％的股票 收盤價 &gt; 60日均線 收盤價 &gt; 120日均線 EPS &gt; 前季EPS 月營收 &gt; 前年同月月營收 廢話不多說，看結果 紅色線跟藍色線，感覺已經講到爛了XD，下次乾脆直接寫一篇教學，以後都直接連到那個教學…。 這個策略適用於200萬以上的股票池，比較小的我沒有試過，有人有興趣的話，可以留言給我，我會試試看假如最多選5個公司買，會有怎樣的結果。 下跌幅度還算是滿大的，但下跌情況在2013年以後好很多，是因為改用IFRS的關係嗎？這個就不清楚啦！XD 回測好，沒辦法用，看這個blog做啥？大家可以看，用怎樣的條件選股，可以產生好策略，看越多會發現，好用的數據就那些！ 而且等之後有空，會有個平台放上免費的策略，且每天更新，就跟財報狗一樣。 為何跟財報狗一樣還要做？恩～因為無聊吧～證明自己的能力。 要是我一個人可以做出跟策略狗平台不相上下，那不是很猛嗎！？可以當作自己能力記錄的證明。 希望能做友善且功能強大的平台不僅限於基本面，還有籌碼面跟技術面！還有行動助手幫忙提醒該換股了！另外有些厲害的策略還是得收點錢，畢竟這個平台是我吃飯的傢伙呀XD 之後再寫跟machine learning有關的策略根據我們現在的介紹，本人真的覺得 machine learning 在分析財報上，有很大的潛力，之後有時間來試試看！","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"價值股","slug":"價值股","permalink":"https://koreal6803.github.io/tags/價值股/"},{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"選股策略","slug":"選股策略","permalink":"https://koreal6803.github.io/tags/選股策略/"}]},{"title":"用杜邦分析加強你的選股技巧（下）回測","slug":"用杜邦分析加強你的選股技巧（下）回測","date":"2017-10-07T02:45:40.000Z","updated":"2017-10-07T14:13:34.000Z","comments":true,"path":"用杜邦分析加強你的選股技巧（下）回測/","link":"","permalink":"https://koreal6803.github.io/用杜邦分析加強你的選股技巧（下）回測/","excerpt":"","text":"今天介紹一個簡單至少近7年有效的方法，考慮杜邦分析的指標，排列組合後，我能得出的最好結果。 選股條件： 總資產轉換率 &gt; 0.3 （選擇獲利高的公司） ROE &gt; 5 （選擇能真正盈利的公司） PB &lt; 3 （選便宜一點的公司） 發現 淨利率 莫名的失效，較難拿來選一小群股票，而 權益乘數 較也是，畢竟一家公司的槓桿程度，不代表公司體質好不好。我發現 總資產轉換率，是一個很好的條件，看企業是否有妥善運用自己的資產，能夠有盈利，回測的效果也比較穩定。 歷史績效 藍色是投資完美分配的狀況，而紅色是用100萬當作起始資金，考慮買賣張數。用此策略投資，資產穩定成長。 適用於IFRS制度開始後 這個策略在2013之前，一次會買很多張股票，且獲利比較不穩定。我個人覺得可能是2013年時改為 IFRSs 後的關係。因為2013年後，企業可以用 “公允” 價值入帳。所以許多有很多資產的公司，淨值大幅成長。實際擁有的東西沒變，只因為遊戲規則改變，產生”看起來好像改善的”現象。 雖然淨值大幅成長，但假如營運狀況沒趕善，則總資產轉換率反而會降低，因此總資產轉換率高的公司，2013年後才被真正的篩選出來，也是此策略歷史績效開始變好的時機。","raw":null,"content":null,"categories":[],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"選股策略","slug":"選股策略","permalink":"https://koreal6803.github.io/tags/選股策略/"},{"name":"杜邦分析","slug":"杜邦分析","permalink":"https://koreal6803.github.io/tags/杜邦分析/"}]},{"title":"用杜邦分析加強你的選股技巧（中）淨利率","slug":"用杜邦分析加強你的選股技巧（中）淨利率","date":"2017-10-05T21:07:14.000Z","updated":"2017-10-06T01:42:20.000Z","comments":true,"path":"用杜邦分析加強你的選股技巧（中）淨利率/","link":"","permalink":"https://koreal6803.github.io/用杜邦分析加強你的選股技巧（中）淨利率/","excerpt":"","text":"淨利率就是指企業從營業收入，真正收進口袋的錢： 分佈圖以下是淨利率的分佈圖： 數量 平均 標準差 0% 25% 50% 75% 100% 1693 -100 2234 -76488.52 0.24 5.09 11.56 5458.2 台灣有滿多企業沒有辦法賺錢！但有少數公司獲利滿驚人的，然而接近0的地方會產生一個很明顯的突波，看來滿多企業盡量讓自己的淨利大於0的，讓財報好看一點。 淨利率高的企業股價更容易成長！我們將淨利率分五組，由低到高，低的是深色，高的是黃色，每60天重新選擇一次，每一條曲線，代表我們長期投入，買入其中一組的股票，所獲得的報酬： 我們發現，投資淨利率高的公司，比較容易獲利！ 杜邦分析的指標終於說完了！總結一下，目前杜邦分析的系列文章中，我們講了三個重要的指標： 淨利率 總資產轉換率 權益乘數 目前看起來，是淨利率跟總資產轉換率比較好用，可以利用這兩個指標選股！而權益乘數其實是比較難用的，因為很難斷定會借貸的公司到底好不好。 而下一篇，我們會能不能整合三個指標，找出比較好的優質股～","raw":null,"content":null,"categories":[],"tags":[{"name":"杜邦分析","slug":"杜邦分析","permalink":"https://koreal6803.github.io/tags/杜邦分析/"},{"name":"入門教學","slug":"入門教學","permalink":"https://koreal6803.github.io/tags/入門教學/"}]},{"title":"小資族也可以使用的選股法！","slug":"小資族也可以使用的選股法！","date":"2017-10-04T09:40:42.000Z","updated":"2017-10-04T23:44:02.000Z","comments":true,"path":"小資族也可以使用的選股法！/","link":"","permalink":"https://koreal6803.github.io/小資族也可以使用的選股法！/","excerpt":"","text":"其實這篇還是14年14倍的選股策略！一模一樣的方法XD，建議先複習一下，這篇只用本金10萬元開始，看會發生什麼問題！ 原諒今天我比較混水摸魚，下禮拜要博士班資格考～～ 附上每天操作紀錄，證明沒在虎爛XD會寫這篇是因為有人問上次那個14年14倍選股法，怎麼可能一次買50張股票，太扯了吧！被他這麼一說，突然我也覺得有點扯，該不會是回測寫錯，有bug吧！？ 目前又檢查了一次，應該是沒找到什麼問題。策略都是考慮真實買賣（本金、張數、手續費都考慮），至於怎麼考慮，下面會更詳細的跟大家介紹。 拉到文章下方，有歷史回測的每天操作紀錄，以示我真的沒在虎爛XD，但交易這種東西，還是自己對自己負責。 假如歷史紀錄有問題，也歡迎隨時聯絡我喔（左上角有信箱和FB），很樂意跟大家討論。 為何一次買這麼多股票？因為我想利用空間與時間選股！ 做回測到現在的心得是，自己真的是凡人，無法預測股票是漲是跌，要用時間跟空間來換取你的零用錢！ 時間，就是指長線，利用一兩個月，讓基本面很好的股票發酵。空間，就是指分散風險，投資多支股票，買到雷股時，才不致於太慘。 Q&amp;A 時間1.這個策略是上市上櫃大於100家時，只挑選上市收盤大於10元的買，上櫃的不考慮對嗎?YES 2.假設上市上櫃的便宜股大於100家公司，選擇收盤價10元以上的上市公司，100萬真的夠嗎?這些雞蛋水餃股特別便宜，下面圖一是該策略所有買入股票的價格分佈圖 幾乎都是在10～20元，然而程式沒有設定最低買入手續費20元，但低頻率的投資應該不會造成太大的影響 3.若是像2008年一樣，一堆便宜股票100萬如何足以購買符合條件的股票呢?上一篇起始資金100萬，但到2008年已經有200萬了，這個時候買50支雞蛋水餃股是沒問題的！ 為了體現買不動這個問題，另外跑了只用10萬元投資的回測： 紅色是用10萬起始資金，並考慮手續費；而藍色則是資產完美平均、不算手續費。結論是：用10萬買當起始資金也行，但獲利倍數會減少： 原本100萬起始的話，參考上篇文章，到今天可以有14倍獲利； 然而現在用10萬當起始資金，考慮真實情況（上圖紅線），到今天只有8倍，但權益曲線很相似！ 假如可以完美平均分散，不真實情況（上圖藍線），不管起始資金多少，都能有近16倍獲利。 接下來就回答關鍵問題：2009年這麼多股票，錢那麼少，怎麼買呢？這邊的策略是：假設n張股票要買，將總資產分成n份，買不起就不買！ 就這麼簡單，所以接下來，用十萬當起始資金，看每日持股數目，就會更瞭解： 上圖可以發現，在2009年時，因為股票太多，藍色線建議購買超過50支股票，而紅線因為本金不足幾乎沒有購買任何股票。 策略都是考慮真實買賣（本金、張數、手續費都考慮），個人覺得這個策略，是有機會真倉使用，然而我自己沒在用就是了XD，這是某天好玩做出來的結果。 所以十萬理論上也是可以的，無論多少錢，回測程式都會將資產分n份，再等比例買入每一支不同的股票！ 4.能否列出在符合條件的年度，各買一張需要多少本金，根據此策略計算結果是符合條件的上市公司各買一張嗎?或是根據您的統計是以資金平均分配在各家公司的結果?附上歷史操作數據 連結一，買股票歷史紀錄：https://drive.google.com/file/d/0B440aEV9RNPTX2xTWUd0ZVF6Unc/view連結二，每天操作的詳細記錄：https://drive.google.com/file/d/0B440aEV9RNPTMGpuZFNfLURwa0k/view 這個策略只是我學習路上，有一點小成果，跟大家分享而已，我一定也有很多不足，要向大家學習的，有什麼問題歡迎留言一起討論喔～～","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"選股策略","slug":"選股策略","permalink":"https://koreal6803.github.io/tags/選股策略/"},{"name":"本益比","slug":"本益比","permalink":"https://koreal6803.github.io/tags/本益比/"},{"name":"股價淨值比","slug":"股價淨值比","permalink":"https://koreal6803.github.io/tags/股價淨值比/"}]},{"title":"用杜邦分析加強你的選股技巧（中）總資產轉換率","slug":"用杜邦分析加強你的選股技巧（中）總資產轉換率","date":"2017-10-03T10:42:44.000Z","updated":"2017-10-03T13:36:44.000Z","comments":true,"path":"用杜邦分析加強你的選股技巧（中）總資產轉換率/","link":"","permalink":"https://koreal6803.github.io/用杜邦分析加強你的選股技巧（中）總資產轉換率/","excerpt":"","text":"總資產轉換率，是一個很有用的指標，可以觀察企業的營運能力，管理階層運用總資產創造營收的能力，也就是代表管理能力。複習一下公式： $$總資產轉換率=\\frac{營收}{總資產}$$ 分佈圖這張分佈圖x軸是總資產轉換率，Y軸是有多少公司 數量 平均 標準差 0% 25% 50% 75% 100% 1696 0.19 0.15 0 0.10 0.17 0.24 3.11 可以發現大部分的公司的總資產轉換率，落在17％左右，可以用這個值來判斷公司的營運是否有效率。我們之後的回測，會利用總資產轉換率來找出優質股，在大盤下跌時，優質股比較不容易下跌。 回測我們把全台灣企業，大致上分成5組來做歷史回測，每60天換一次股票，黑色到黃色代表總資產報酬率由低到高，看他們的平均漲跌幅： 投資淺色會比深色組別的股票還要好，代表投資體質好的公司，真的比差的公司還要穩定很多！下次選股前不妨看一下總資產轉換率，來決定該股票適不適合買入！尤其適合同產業的公司互相比較，更能看出好壞！ 另外也有一個有趣的現象，深黑色有時候也會意外變成第一，這方面我至又不知到為什麼了XD，是因為有些公司還沒開始盈利但前景看好？ 除了深黑色那條線以外，大致上還算符合深到淺，低到高的一個走勢。 人即是公司總資產轉換率也可以拿來評量一個人，想像某人資產有100萬，而他每個月的開銷是： 吃飯、水電生活等，花了3萬元，而每天上班月入6萬元 看起來生活水平還算優渥！ 但假如把他當作一家公司，則他的總資產轉換率是6/100每個月，就這麼讓97萬躺在銀行裡任由通貨膨脹摧殘，要是他可以利用存款，投資自己來幫自己的人生滾雪球，那一定會產生很厲害的複利效應！ 我自己是沒有辦法忍受存款在那裡閒涼，所以才編寫投資程式：利用已有資產來提高資產轉換率！ 從總資產轉換率看買房這件事要怎麼決定你要不要買房子呢？也可以從資產轉換率來思考，首先第一個迷思就是買了房，總資產會變少。 其實資產不會變少的，因為我們只是拿錢換房子，房子也算資產的一部份（假如不貸款）。 但假如你很會投資，那買了房，會變得沒錢理財，會導致總資產轉換率會瞬間大減，任憑你投資技巧再好，投資淨利率在高，乘以總資產轉換率後，到頭來你的個人ROE還是會大衰退！ 有人說房租那麼貴，還不如直接買房，每月繳貸款也比房租高一點點而已。 但對於善於投資的人來說，傷害最大的，不是房貸，而是頭期款！將你的金錢瞬間換成磚頭！XD 滾雪球是很驚人的，然而從一個大雪球開始滾跟小雪球開始滾，會差很多，可以參考Mr. Market的文章算一下自己什麼時候買房合適。 當然假如買房也是一種投資，那就另當別論！ 有點離題了…拉回來一下 總之提高個人總資產轉換率的好方法投資自己也是很好的選擇，例如增進第一專長，學第二專長，學習如何創業，都是我正在努力的目標！大家有什麼好方法提高自己的總資產轉換率呢？每天來看一下FinLab也是一個很好的投資喔！（自己打廣告XD）","raw":null,"content":null,"categories":[],"tags":[{"name":"杜邦分析","slug":"杜邦分析","permalink":"https://koreal6803.github.io/tags/杜邦分析/"},{"name":"入門教學","slug":"入門教學","permalink":"https://koreal6803.github.io/tags/入門教學/"},{"name":"總資產轉換率","slug":"總資產轉換率","permalink":"https://koreal6803.github.io/tags/總資產轉換率/"}]},{"title":"拆解ROE用杜邦分析加強你的選股技巧（中）權益乘數","slug":"用杜邦分析加強你的選股技巧（中）權益乘數","date":"2017-10-02T13:53:41.000Z","updated":"2017-10-03T21:43:59.000Z","comments":true,"path":"用杜邦分析加強你的選股技巧（中）權益乘數/","link":"","permalink":"https://koreal6803.github.io/用杜邦分析加強你的選股技巧（中）權益乘數/","excerpt":"","text":"今天這篇繼續討論杜邦分析，其中的三個最重要的數字 權益乘數 總資產轉換率 淨利率 今天就來看一下台灣的公司在權益乘數是如何分佈的！ 權益乘數權益乘數，也就是企業負債的比率！負債是一個兩面刃，有很多錢的話，企業可以將錢轉化成自己的產品，並將產品賣出去，但風險隨之升高，萬一還不出錢可是會瞬間破產。 數量 平均 標準差 0% 25% 50% 75% 100% 1703 2.35 2.78 -39.23 1.43 1.77 2.32 33.70 仔細看一看竟然還有負數，哈哈也太誇張了吧！ 還記得上次跟各位說明，權益乘數 = 總資產 / 股東權益 我更深入檢查下發現，台灣總共有8家公司的權益乘數是負數，其中並不是總資產是負的，而是股東權益是負的！代表全體投資人還必須多付一些錢才能把公司的債還清，滿可怕的XD！ 負債沒想像中的這麼不好！接下來我們一樣把所有的公司分成五組，去看看每季買入它們的歷史績效！ 可以發現負債越多的那組，其實並沒有想像中的那麼可怕，，在歷史績效中，算是高段班！畢竟會使用負債來增加自己的收入，也是公司的能力一部份，不是嗎？ 反而可以看到，槓桿最小那組，都是吊車尾，就算去掉了負的那群，實驗結果還是吊車尾！代表不會用槓桿的公司，似乎在業績表現上也會比較無法那麼亮眼。 會善用槓桿的人更厲害人活在這個複雜的世界，本來就應該學會如何安全的運用槓桿，才能達到事半功倍之效果。這邊指的不是投資的槓桿，是指生活中的各種槓桿，阿基米德說： 給我一個支點，我可以舉起整個地球。","raw":null,"content":null,"categories":[],"tags":[{"name":"杜邦分析","slug":"杜邦分析","permalink":"https://koreal6803.github.io/tags/杜邦分析/"},{"name":"入門教學","slug":"入門教學","permalink":"https://koreal6803.github.io/tags/入門教學/"}]},{"title":"用杜邦分析加強你的選股技巧（上）","slug":"用杜邦分析加強你的選股技巧（上）","date":"2017-10-01T14:01:09.000Z","updated":"2017-10-01T14:26:01.000Z","comments":true,"path":"用杜邦分析加強你的選股技巧（上）/","link":"","permalink":"https://koreal6803.github.io/用杜邦分析加強你的選股技巧（上）/","excerpt":"","text":"前幾篇，我們連講了PE、PB、ROE，這些是價值型選股最重要、最最簡單的幾個要素，也寫了一些還不賴的歷史回測，10萬起始資金也能有模有樣。這篇將會更深入一層，介紹杜邦分析！ 學習回顧我們瞭解了幾個元素： 投資人的錢 企業的收益 企業的股價 3/1=PB、3/2=PE、2/1=ROE。（這邊是很大概的講，用詞比較不精確，請多包涵！） 然而真正的企業有麼簡單嗎？應該不置於吧？ 更深入一點點今天介紹比較複雜名詞：杜邦分析（DuPont Analysis）！杜邦分析將財務報表上的精華濃縮成三個數字，分別代表： 企業的槓桿 企業銷售能力 企業賣出一樣商品是否賺錢 這東西有沒有用？我還不知道XD，想說一邊介紹，一邊做回測給大家看。 杜邦分析超無腦介紹企業的金流，跟個人金流是一樣的道理，所以我用一個很簡單的例子介紹： 假如你有2萬元，跟爸媽借了1萬元買了熱賣的iphone X（3萬），再用4萬元的高價賣給別人，淨賺1萬。 例子結束了！就是這麼簡單。 首先我們先來計算一下ROE，因為你投入了2萬，淨賺1萬，所以ROE是1/2，但ROE像是故事的開頭跟結尾相除，中間的過程完全被省略了，杜邦分析可以補足： 首先，因為你原本有2萬借了1萬，槓桿是(2+1)/2 = 3/2倍，通常命名為權益乘數再來，你用3萬換4萬，總資產轉換率是4/3倍最後，獲得的4萬中，其實只賺了其中的1萬，所以淨利率是1/4 所以最後$\\text{ROC}=\\frac{1}{4}\\times\\frac{4}{3}\\times\\frac{3}{2}=\\frac{1}{2}$ 當然這只是個超簡單的例子，稅呀什麼都通通沒管，將以上的數值寫成公式： $$\\text{ROE}=\\text{淨利率}\\times\\text{總資產週轉率}\\times\\text{權益乘數}=\\frac{\\text{稅後淨利}}{\\text{營收}}\\times\\frac{\\text{營收}}{\\text{總資產}}\\times\\frac{\\text{總資產}}{\\text{股東權益}}$$ 股東權益，就是所有投資人的錢，在這個例子中就是你自己的錢(2萬)而總資產最主要包含：借貸的錢（1萬）、你本來的錢（2萬）營收則是（4萬），稅後淨利是你真正真正獲利的部分（1萬） 明天就來回測給大家看～明天見吧！","raw":null,"content":null,"categories":[],"tags":[{"name":"杜邦分析","slug":"杜邦分析","permalink":"https://koreal6803.github.io/tags/杜邦分析/"},{"name":"入門教學","slug":"入門教學","permalink":"https://koreal6803.github.io/tags/入門教學/"}]},{"title":"買股票只考慮ROE是不夠的！","slug":"買股票只考慮ROE是不夠的！","date":"2017-09-30T11:28:20.000Z","updated":"2017-09-30T13:34:07.000Z","comments":true,"path":"買股票只考慮ROE是不夠的！/","link":"","permalink":"https://koreal6803.github.io/買股票只考慮ROE是不夠的！/","excerpt":"","text":"昨天的文章介紹了ROE，是一個企業用資本賺錢的能力，可以用ROE找出會賺錢的公司，買入其股票。 但這樣會有問題！因為ROE跟價格並沒有連動！也就是你無法確認這家公司股價漲過頭了 公式推導為了更深入瞭解ROE，並且找一個適合的指標跟他搭配，我們再把ROE的公式拿出來討論一下： $$\\text{ROE}=\\frac{\\text{淨利}}{\\text{股東權益}}=\\frac{\\text{市值/股東權益}}{\\text{市值/淨利}}=\\frac{\\text{股價淨值比}\\text{PB}}{\\text{本益比PE}}$$ 由上述公式可以發現，ROE又可以跟PB、PE扯上關係。首先先來看PE： PE 越小造成 ROE 越大，而兩者都代表公司的獲利很好，可以買入！很好的現象 但接下來看到PB的時候，奇妙的是情就發生了： PB越大會影響ROE也會越大，前者大說明股票被高估，後者越大說明公司投資報酬率很好，於是我們可以得到一個結論： ROE高並不代表其價格值得買入！ 歷史回測由以上結論我們可以發現，除了用ROE來選擇投資報酬率高的公司外，我們還必須利用PB選擇便宜股。 策略名稱 策略一（只考慮ROE） 策略二（考慮ROE跟PB） 選股條件 ROE &gt; 5 同策略一 收盤價 &gt; 10 PB &lt; 1.2 每60天更新一次持股，不計算手續費： 其中策略一每次都把資產分散在100支股票左右，而策略二把資產分散在平均為10支股票左右。 策略二每次持有的股票非常少且獲利更勝策略一！ 每次買入個位數股票，小資族會比較好投資，當然我真的不知道有沒有做錯，所以我將策略二的持股歷史紀錄供大家下載：csv檔 金融海嘯資產少60％！但這個策略也是教學用，大家不要輕易使用，畢竟在金融海嘯時，其虧所來到了非常驚人的60％。如何判斷大盤是否大跌，可以參考之前很多篇的介紹。 策略二今天持股策略二目前持股為： 第一個column是股票代號，第二個column是買入日期，第三個columns為價格，約60個交易日後，我們再來看一下這幾支股票是賺錢還是賠錢。有興趣可以追蹤一下！","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"ROE","slug":"ROE","permalink":"https://koreal6803.github.io/tags/ROE/"},{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"選股策略","slug":"選股策略","permalink":"https://koreal6803.github.io/tags/選股策略/"},{"name":"股價淨值比","slug":"股價淨值比","permalink":"https://koreal6803.github.io/tags/股價淨值比/"}]},{"title":"EPS跟ROE哪個比較好用？","slug":"EPS跟ROE哪個比較好用？","date":"2017-09-29T11:51:12.000Z","updated":"2017-09-29T13:07:17.000Z","comments":true,"path":"EPS跟ROE哪個比較好用？/","link":"","permalink":"https://koreal6803.github.io/EPS跟ROE哪個比較好用？/","excerpt":"","text":"投資人最喜歡看每股盈餘（EPS）來決定股票的好壞，股票雜誌也喜歡說某家公司EPS多好，但今天所做的回測發現，根據每季EPS選擇股票並不好！ EPS 介紹EPS = 稅後淨利 / 在外流通股數 間單來講就是投資人每投入一股，一個月可以賺多少錢回來。公司賺的錢越多，其EPS越大公司發行了很多股票，EPS越小 但是這樣有個問題：公司賺多少錢不等於公司經營的好壞！例如：大公司掙錢肯定要比小公司多，但我們買股票的重點不在誰獲利較高，而是在哪家公司成長比較快速！ 所以只比較不同股票當季EPS，其實是有弊端的，我們用實驗來舉例給你看： EPS低到高的歷史回測我們將EPS由低到高分成五組，每一組的股票大約是一樣多的，每60天調整一次，選擇EPS在範圍內的股票，同樣假設資產可以平均分散，不算手續費： 我們發現，買EPS大於0的股票獲利會高於EPS小於0的組別。 但，是假如EPS大於0的組別之間並沒有太大的關係。 代表假如你的買股票時，假如平均是買2～3個月的話，可以稍微看一下當季EPS只要不要小於0就可以了，就算很高也不一樣定有用，但小於0的話就要注意了！ 跟ROE做比較ROE就是一個考慮了公司可用資金與報酬的指標： 股東權益 = 總資產 - 總負債ROE = 稅後盈餘 / 股東權益 * 100% ROE就變成，公司投入了一些資產，可以賺多少錢回來的指標！ ROE歷史回測我們同樣將ROE從高到低分成五組，每60天換股，取全台灣上市公司介於某一組ROE之間的股票： 可以發現，用ROE來跑歷史回測，真的比較不一樣，獲利跟ROE成很漂亮的正比！買ROE越高的公司，比買EPS高的公司更容易挑到優質股！","raw":null,"content":null,"categories":[],"tags":[{"name":"EPS","slug":"EPS","permalink":"https://koreal6803.github.io/tags/EPS/"},{"name":"每股盈餘","slug":"每股盈餘","permalink":"https://koreal6803.github.io/tags/每股盈餘/"},{"name":"ROE","slug":"ROE","permalink":"https://koreal6803.github.io/tags/ROE/"},{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"}]},{"title":"14年14倍的選股策略！","slug":"比策略狗還要安全的選股策略！","date":"2017-09-28T12:05:16.000Z","updated":"2017-09-30T22:32:56.000Z","comments":true,"path":"比策略狗還要安全的選股策略！/","link":"","permalink":"https://koreal6803.github.io/比策略狗還要安全的選股策略！/","excerpt":"","text":"究竟如何買到好股票呢？用超簡單的財經指標就可以有14年約獲利14倍的策略，重點是可以躲過致命的金融海嘯、大盤崩跌！半年只要調動一次持股，甚至偶爾叫你半年不碰股票去放個假。當然此策略主要是教學用，建議自行調整後再真實投入市場。 從統計的角度帶你一步一步設計量化策略一般的財經文章都是講講理論，算算公式，套幾個例子，就結束了。 問題是，你怎麼知道那個例子是湊巧還是真的有用？ FinLab跟一般的財經部落格不一樣，我們把全台灣所有的公司做統計整理給大家，讓大家瞭解如何從股市中獲利，透過長時間的投資，為自己增加買菜錢。 此篇是前幾篇的一個小統整在股價淨值比有這麼神？跟本益比能幫你選出優質股？中，裡面介紹了用不同的本益比和股價淨值比跑歷史回測 於是今天來總結一下這兩個指標，寫一個策略，讓大家瞭解股價淨值比跟本益比合在一起迸出什麼樣的火花！ 策略就是這麼簡單：找便宜且會賺錢的公司簡單來說這個就是一個雞蛋水餃股策略～ 先用以下條件篩選出雞蛋水餃股： 股價淨值比 &lt; 0.7 的股票 （被嚴重低估股票） 本益比 &lt; 13 的股票 （還算會賺點錢的公司） 我們先把它們定義為”便宜股” 還必須去除大盤大跌的時刻這種便宜股在股市大跌的時候，跌得非常驚人，一定要避開！ 還記得在股價淨值比有這麼神？ 這篇中，有介紹當大盤大跌後，便宜股會變多！反之，當大盤過熱時，便宜股會很少。就是利用這個原理，來進行對大盤時間的過濾： 假如便宜股太少（上市上櫃小於100家公司），代表大盤處於漲多的狀態，清空所有股票，不持股半年！可以去放放假，陪陪家人，休息一下！ 假如便宜股夠多，則買收盤價在10元以上的上市股票 (畢竟太便宜的股票還是會怕怕的XDD) 每半年換一次股，選擇滿足以上條件的所有股票，本金100萬元台幣，手續費不打折，交易稅0.3％ 事實上十萬本金就可以了，只是獲利從14倍減少到8倍左右 常常休息的策略，卻可以有如此高的績效！這個策略常常休息，甚至在2010~2011這兩年完全沒買股票！真的很扯！ 大盤緊張之際完全不用盯盤，不用每天提心吊膽的，你說這種輕鬆的策略，怎麼可能賺到什麼錢？ 但，這就是一個跟財報狗的績優股獵犬不相上下的交易策略，不鳴則已，一鳴驚人，平常不買股票，等到台股崩跌時，能夠快速的獲利！ 策略是否持股也是一種指標～這個策略躲過了從2004年來每一次的台股慘案，所以也可以用這個策略持股數來看出大盤現在是否漲過頭。持股數0代表大盤漲過頭了： 最近股票會崩跌嗎？針對這個問題，到今天為止，這個策略還在持股，所以我認為現在崩跌的機率不大，然而歷史真的會跟未來相似嗎？沒有人可以說的准。 當市場受到大盤洗禮，許多好公司都跌回雞蛋水餃股之際，就是這個策略出動的好時機！ 比績優股獵犬的虧損還小，但還是要注意虧損！其實，虧損還是有的，2012年有點慘，一直盤整，沒有繼續突破新高，最大的虧損來到了25%： 你絕對不能輕易使用這個策略！ 當你決定採用這個策略時，代表你已經檢驗過它數百遍，你相信這個策略，也代表當這個策略產生了25%的虧損時，你都必須視之理所當然，不動於衷，繼續相信它。 我不保證這邊的績效是否正確，也不保證之後這個策略不會失效但你可以參考這邊的方法，實際模擬半年，甚至去實現自己的策略，把它修改的更好！ 光看這兩種數據，就有這樣的功效了，更何況是考慮更多因素！目前介紹了本益比、股價淨值比，並且用這兩個數值當作買賣標準，就能得到這樣的策略！ 更別提後續介紹更多種的基本面、技術面、甚至是籌碼面的選股方式，來讓大家對於股市更有感覺，更輕鬆的選擇股票標的！ 你知道為何我有勇氣把自己覺得賺錢的策略免費分享給大家嗎？因為更猛的在後面～XD 我盡量每天都會發一篇，假如你覺得到目前為止還喜歡的話，可以繼續關注這個blog，或是留言給我一點建議，接下來想做的主題： 更多的財經指標、回測 Machine Learning 選股 python 完全新手股市分析（包含歷史財經數據包及其研究方法） 請問哪個你會比較有興趣呢？","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"選股策略","slug":"選股策略","permalink":"https://koreal6803.github.io/tags/選股策略/"},{"name":"本益比","slug":"本益比","permalink":"https://koreal6803.github.io/tags/本益比/"},{"name":"股價淨值比","slug":"股價淨值比","permalink":"https://koreal6803.github.io/tags/股價淨值比/"}]},{"title":"大盤要跌了嗎？利用企業本益比分佈來判斷！","slug":"大盤要跌了嗎？利用企業本益比分佈來判斷！","date":"2017-09-27T12:52:52.000Z","updated":"2017-09-27T14:47:55.000Z","comments":true,"path":"大盤要跌了嗎？利用企業本益比分佈來判斷！/","link":"","permalink":"https://koreal6803.github.io/大盤要跌了嗎？利用企業本益比分佈來判斷！/","excerpt":"","text":"最近大盤一直跌，大家都不禁懷疑是否開始大崩盤了？因為前幾天寫了一篇用淨值比判斷大盤漲跌，想說本益比是不是也可以這樣如法炮製呢？於是做了台股企業本益比中位數隨時間的變化圖。 在看圖之前不免俗的先講講本益比（PE） 本益比中位數介紹本益比的簡單公式是：本益比 = 每股市價／每股盈利。 本益比越高，代表你用較多錢買一間盈利小的公司股票本益比越低，代表你用較少錢買一間盈利大的公司股票 利用本益比中位數來判斷大盤大趨勢下圖紅線是是每天大盤上市上櫃股票的本益比中位數（取過對數的）隨時間變化圖，藍線是2個標準差，灰色是大盤： 大家可以觀察一下，以下是我發現有趣的點： 假如我們現在有個策略在紅線為2.5左右買進大盤，而3左右出清，感覺獲利會滿可觀的！（然而金融海嘯還是得凹一下單就是了XD） 用本益比中位數台股2000年上萬點為3.5，而今年上萬點只有2.6，代表兩次上萬點意義不太一樣，2000年那次比較像是泡沫，破了後來很慘烈；而今年是大盤破新高，而紅線沒破新高，代表企業的盈利目前來講還算是跟的上股價的漲幅，沒有太誇張，所以這幾天雖然都慘慘的，我個人還是保持平常心。 大家可以搭配之前用淨值比判斷大盤漲跌的文章看，雖然股價淨值比的中位數有點偏高，但目前都沒有大暴跌的明顯徵兆，但我真的不是叫你相信這些指標，因為每個指標的結論很有可能不一樣，例如下面就是一個例子： 反面例子：GOOGLE TREND這個指標已經被Mr.Market在這篇文中介紹過了，簡而言之：google trend 指標就是 “台股” 這個關鍵字的熱門程度，是反指標。 事隔多年看一下，發現最近有點散戶真的是灌入台股這樣： 最近”股票”的搜尋人氣已經達到歷史新高更勝2008金融海嘯前… 為什麼”股票”關鍵字人氣越高，股票越容易跌？因為用google搜”股票”這兩個字的，大部分都是新手散戶，有人把股市當做是一種心裡學的競技場，新手往往沒有交易的心裡素質，容易買高賣低。引用巴菲特的名言： We simply attempt to be fearful when others are greedy and to be greedy only when others are fearful. 總結：雖然淨值比來看，企業的盈利目前來講還算是跟的上股價的漲幅，但投資時還是得參考更多的指標再做決定，並自行負責！ 我喜歡跑一些歷史數據找一些規律性，但絕對不做預測，希望可以用最中性、較科學的方式來跟大家一起研究投資這門學問。","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"本益比","slug":"本益比","permalink":"https://koreal6803.github.io/tags/本益比/"},{"name":"大盤","slug":"大盤","permalink":"https://koreal6803.github.io/tags/大盤/"},{"name":"簡易策略","slug":"簡易策略","permalink":"https://koreal6803.github.io/tags/簡易策略/"}]},{"title":"本益比能幫你選出優質股？","slug":"本益比能幫你選出優質股？","date":"2017-09-26T13:32:28.000Z","updated":"2017-09-30T22:32:27.000Z","comments":true,"path":"本益比能幫你選出優質股？/","link":"","permalink":"https://koreal6803.github.io/本益比能幫你選出優質股？/","excerpt":"","text":"如何買到好股票呢？本文用統計的方式讓大家感受本益比（PE）的高低究竟跟股價有多少的影響？是否選擇低本益比（PE）的股票就沒問題？這些都是我自己入門股票買賣最想問的問題，究竟一家公司的PE要看得多重才對。 網路上已經一堆網站都在介紹PE了，今天做一些別的統計給大家看，常常聽別人說PE約在10～20之間，但是我們還是來看一張讓你很有感覺且非常新鮮（昨天的）的台股每間公司的PE分佈圖： 就像大家說的，真的集中在10～20之間，然而我們可以看到此分佈的兩個標準差來到了5～37左右，而更大一部份的PE市集中在10~15之間。 接下來我們就來做個小實驗，把2005年～2017年所有的台股上市公司都拿來回測，每隔半年選入本益比符合條件的全體公司，並且平均費配現有資金，當然實際這樣玩你得身價好幾個億，但我們這邊只是假設一個理想的狀態，手續費也是0，我們一共有七組不同的實驗： 本益比介於 05 ~ 10 之間 介於 10 ~ 15 之間 介於 15 ~ 20 之間 介於 20 ~ 25 之間 介於 25 ~ 30 之間 介於 30 ~ 35 之間 介於 35 ~ 40 之間 每一組都模擬12年看一下投資報酬會如何： Y軸是獲利的倍數，可以發現定10~15普遍比其它組還要好，證明在市場上買低本益比的股票是可以長期看多的，那為何最低本益比的5~10這組，會比較差呢？我個人認為可能是股票的多樣性不足導致的，因為本益比介於5～10的股票本來就比較少，沒有足夠的分散風險。另外也有可能是，某家爛公司突然大量的業外收入，讓我們以為它賺很多，但體質還是很差導致的。來看一下這七組12年的獲利倍數： 這邊的Y軸一樣是獲利的倍數，可以發現本益比越大，獲益就越差，跟報酬呈現反比。也證實了本益比越小的股票，是越值得投資的！ 但！ 這邊指的是投資風險足夠分散的情況下得到的結論，假如你的金額不大，只看本益比買股票會發生什麼事情呢？以下我們再做兩組實驗： 本益比介於12.9~13.1 本益比介於12.5~13.5 這兩種不同的組合，其平均本益比都在13左右，但為何獲利差這麼多呢？答案是因為選股的數量不一樣，第一組實驗每次都選了30支左右的股票，而第二組實驗每次都只選了小貓兩三隻： 可以發現，當你只選了兩三支本益比很小的股票時，根本一點用都沒有用！財經數據就像超級大雜訊，100支股票是可以簡單找到規律性的，但挑一支說會漲，一定是在騙自己。 總結： 本益比重看不重用（XD），不是啦，應該說本益比平常買股票參考用，但絕對不能當作唯一的指標！ 像巴菲特一樣看準了重壓一家公司，實在是很有難度，像我這種散戶，假如資本夠，還是好好的分散風險吧！ 資本不夠的話，得配合其它條件篩選出更好的股票，盡量平均分配，是比較恰當的。","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"本益比","slug":"本益比","permalink":"https://koreal6803.github.io/tags/本益比/"},{"name":"分佈圖","slug":"分佈圖","permalink":"https://koreal6803.github.io/tags/分佈圖/"},{"name":"統計","slug":"統計","permalink":"https://koreal6803.github.io/tags/統計/"}]},{"title":"用股價淨值比來判斷大盤漲跌","slug":"用股價淨值比來判斷大盤漲跌","date":"2017-09-25T18:52:40.000Z","updated":"2017-09-27T14:35:21.000Z","comments":true,"path":"用股價淨值比來判斷大盤漲跌/","link":"","permalink":"https://koreal6803.github.io/用股價淨值比來判斷大盤漲跌/","excerpt":"","text":"股價淨值比(PB)真的能夠判斷台股大盤漲跌嗎？今天做了一張gif動圖，讓各位用眼睛觀察台股是否漲多了，是否有泡沫要破的跡象，甚至讓你有機會可以買在大盤低點。 股價淨值比(PB)，可以拿來判斷股民對這某家公司的看法，假如大家覺得這家公司未來會壯大，則淨值比會大於1，如果這家公司會衰退，則淨值比會小於1。那剛好我們就可以做出一張分佈圖，來看一下全體投資人對每一家公司看好看衰的分佈圖，跟大盤之間的變化（這張圖稍大可能要等久一點…）。結果發現，當大盤大跌之前，會有類似的前兆，想知道前兆是什麼？請接著看這張圖： 這張圖的上半部，是用來看多少個企業被看好，多少企業被看衰。分佈圖的x軸分成左右兩邊，大於零代表樂觀，小於零代表悲觀。其實x軸就是股價淨值比取log(PB)的分佈，為什麼要用log呢？是為了讓分佈圖更接近高斯，也讓多空變成在零的對稱位置。此圖的每一根bar代表有多少支股票，其股價淨值比為log(PB)。此圖有五條垂直線，代表著中位數加減兩個標準差。這張圖的下半部則是對照大盤的某個時間點，我們從2010年統計到2015年，每20天計算一次股價淨值比分佈圖。 大部分的時候，投資人基本上看好台灣的市場，所以分佈普遍偏向0的右邊，而且事實發現，近來台股加權指數破萬，並不是大泡泡，而是台灣的企業真的慢慢隨著時間在壯大，因為當大盤破萬點時，分佈圖並沒有超級偏右邊，代表台灣的企業是真的有跟上投資人的期待。然而最近還是有點太過樂觀的氣氛瀰漫，還是得懂得居高思危才行XD。 可以發現一些有趣的現象： 中位數平常都待在log(PB) = 0 ~ 1 之間，當大盤跌到最低點時，會回到0～0.05附近，可以當作大盤買點，成功在2004、2005、2012、2015歸零附近時買入成功買在超低點，唯獨金融海嘯時，中位數最小來到了-0.4左右才反轉，所以還是要看一下中位數是否在&lt;=0附近反轉，比較保險。 大盤在高點時，PB標準差會比其它時候略小，而中位數最大約在 log(PB) = 0.4～0.5 左右（可以當作大盤賣點，但較難判斷） 當大盤要大跌前的前兆是分佈的標準差會明顯變大，且伴隨中位數些許變低 接下來我們用更簡明的圖讓大家更一目了然： 圖中的五條線（紅、黃、藍）分別對應到上面動畫圖分佈的中位數及兩個標準差（紅、黃、白）唯讀中位數的顏色從白色改成藍色，比較清楚。另外灰色的是大盤，發現近五年藍色線接近0且反轉時，都是大盤很好的買點，另外當大盤到高點時，通常這五條線會跟大盤產生背離！也就是大盤越來越高，但分佈線高點卻越來越低。現階段，雖然大盤到15000點了，但還未產生背離現象，可以推斷最近的大跌應該不是真正的超大跌（吧？），但這也只是我的猜測啦，股市中沒有什麼是絕對的。 以上就是簡單判斷大盤多空的簡單方法！","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"大盤","slug":"大盤","permalink":"https://koreal6803.github.io/tags/大盤/"},{"name":"簡易策略","slug":"簡易策略","permalink":"https://koreal6803.github.io/tags/簡易策略/"},{"name":"股價淨值比","slug":"股價淨值比","permalink":"https://koreal6803.github.io/tags/股價淨值比/"}]},{"title":"股價淨值比有這麼神？","slug":"股價淨值比有這麼神？","date":"2017-09-24T11:09:52.000Z","updated":"2017-09-30T22:33:52.000Z","comments":true,"path":"股價淨值比有這麼神？/","link":"","permalink":"https://koreal6803.github.io/股價淨值比有這麼神？/","excerpt":"股價淨值比(PB)，是用來判斷一個究竟公司是被高估還是低估的指標，可以參考介紹\n究竟如何用PB買到好股票呢？PB真的越低越好嗎？我們來看看。","text":"股價淨值比(PB)，是用來判斷一個究竟公司是被高估還是低估的指標，可以參考介紹 究竟如何用PB買到好股票呢？PB真的越低越好嗎？我們來看看。 設計以下實驗：每半年（125天）換一次持股，從2010年到2017年選取台股上市公司所有 PB &lt; N 的公司，並將資產平均作分配，持有半年。 這張圖的Y軸是從2010年開始投資，資產的倍數變化圖，可以發現PB小的股票真的有比大盤好，原本我以為PB不能越低越好，但最後發現，PB越小，報酬率真的越高（只限於這個簡單策略），但我這邊說的是一群股票的整體結果，不代表單一股票PB越小就一定越好喔！可以看出 PB&lt;0.5 的時候，回測結果大起大落，我們來仔細看其中到底怎麼回事： 這個是 PB &lt; 0.5 的歷史績效圖，藍色是不考慮手續費跟稅，且資產可以完全平均分散買入所選的股票；紅色是起始100萬，也是盡量平均分散，但最小張數是一張，不能買零股，並且會放棄太貴的股票。可以發現紅色跟藍色差滿多的，最後結果可以差到50萬元，其中手續費佔了不少，為什麼2015～2016年下滑這麼大呢？我們接著來看一下手中持股數量： 此圖的Y軸是手上持股的數量，可以發現，2015～2016年只買了非常少張股票，可能才2～3張。這就像是把雞蛋都放在同一個籃子很危險，造成鉅額損失。另外可以觀察到，買入的股票數量似乎跟大盤成反比，大盤漲，手上股票就變少，大盤跌，手上股票就變多，是不是PB 小的股票變少，反過來想是大部分股票被高估，整體台股過於樂觀，泡沫即將破滅？之後可以來研究看看。 最後我們來看一下最大的下滑損失了多少%的總資產： 此圖的Y軸為下跌百分比，可以發現在2015～2016年，損失了40%的總資產，假如我們剛好在那時候投資，100萬就只剩60萬，實在有點可怕。 於是我們總結一下： 選擇PB越小的一群標的（PB &lt; 0.6~0.8），半年更新一次還不錯，但一定要做好風險管理，千萬別將全部的雞蛋放在通一個籃子裡！也可以配合其它的財報選出優質股～","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"如何買股票","slug":"如何買股票","permalink":"https://koreal6803.github.io/tags/如何買股票/"},{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"股價淨值比","slug":"股價淨值比","permalink":"https://koreal6803.github.io/tags/股價淨值比/"}]},{"title":"策略狗。績優股獵犬3。簡單回測","slug":"策略狗。績優股獵犬3。簡單回測","date":"2017-09-23T09:34:35.000Z","updated":"2017-10-03T13:46:02.000Z","comments":true,"path":"策略狗。績優股獵犬3。簡單回測/","link":"","permalink":"https://koreal6803.github.io/策略狗。績優股獵犬3。簡單回測/","excerpt":"","text":"今天來做個間單的回測，為策略狗文章作一個總結： 我們選股條件： “自由現金報酬率”最高的前30% 本益比 &lt; 25 股價淨值比 &lt; 1.5 每格N天就重新選一次手中的股票，比較跟策略狗不一樣的是，回測不只限於20支，只要滿足條件，就會買入，例如當手上要換成30張股票時，會將自己的所有現金平均分配到此30張股票，不計算手續費。 以下是回測結果： 其中Y軸為你的資產的倍數。可以發現，回測結果跟策略狗上面的曲線是相似的。不論N是多少，都比大盤還要好，然而其中N=60的較差，有可能的原因是換股的頻率太高了，”自由現金報酬率”還沒醞釀完。另外，半年是比一年換一次股好一點點而已，幾乎可以忽略不計。 幫大家測完的結果，雖然我寫的方法跟策略狗有點不一樣，但是用非常雷同的方法，結論是：真的每年再換一次股就好了！ 我每天都會放一篇跟選股有關的新文章，假如你覺得FinLab對你有幫助，也可以告訴我你最想看到哪些內容喔！","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"歷史回測","slug":"歷史回測","permalink":"https://koreal6803.github.io/tags/歷史回測/"},{"name":"策略狗","slug":"策略狗","permalink":"https://koreal6803.github.io/tags/策略狗/"},{"name":"自由現金報酬率","slug":"自由現金報酬率","permalink":"https://koreal6803.github.io/tags/自由現金報酬率/"}]},{"title":"策略狗。績優股獵犬2。何時買股才對？","slug":"策略狗。績優股獵犬2。何時買股才對？","date":"2017-09-22T13:47:06.000Z","updated":"2017-10-03T13:45:56.000Z","comments":true,"path":"策略狗。績優股獵犬2。何時買股才對？/","link":"","permalink":"https://koreal6803.github.io/策略狗。績優股獵犬2。何時買股才對？/","excerpt":"上一篇介紹了”自由現金報酬率”高的股票，不容易大起大落。\n這篇就來分析一下，”自由現金報酬率” 每隔多少天重新買一次，獲利比較好。","text":"上一篇介紹了”自由現金報酬率”高的股票，不容易大起大落。 這篇就來分析一下，”自由現金報酬率” 每隔多少天重新買一次，獲利比較好。 首先，我們先取2010年到2017年所有低估的股票： 股價淨值比 &lt; 1 本益比 &lt; 15 每隔N天就重新選取低估股票，並觀察其漲跌是否與它的”自由現金報酬率”成正比： X軸為持有的週期，這邊的天數是指股票有開市的天數，理論上一年是250天左右，Y軸為相關性，有關相慣性，在這邊做一個簡單的介紹： 相關性正數越高（最大是1），代表”自由現金報酬率”跟股票漲跌越成正比。 相關性接近0，代表，”自由現金報酬率”跟股價沒關係。 相關性越負（最小是-1），代表”自由現金報酬率”跟股票漲跌越成反比。 可以發現當週期從50天到150天其間，相關性是慢慢增加的，代表股票的”自由現金報酬率”需要一點時間醞釀，醞釀時間大概半年。然而，約在半年之後，correlation就開始大起大落（但好在幾乎都是正的），所以我們可以推斷：持股長達半年以後，股價漲跌跟”自由現金報酬率”較不相干。 於是，從上圖我們可以推斷： 可以約每半年換一次手上的股票，讓”自由現金報酬率”有時間反映在股價上！ 雖然策略狗官網的指導是說一年，但從圖中發現半年或許更合適。（沒准明天寫一篇推翻今天的結論也說不定XDD） 當然，沒有人能保證這些研究都是絕對正確的，假如大家覺得我的實驗哪裡不夠完善，要如何改善，歡迎跟我一起討論。下一篇我們將回測台股2010到2015年所有股票，看看是否跟此結論吻合。 我每天都會放一篇跟選股有關的新文章，假如你覺得FinLab對你有幫助，可以偶爾來追蹤一下～","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"策略狗","slug":"策略狗","permalink":"https://koreal6803.github.io/tags/策略狗/"},{"name":"自由現金報酬率","slug":"自由現金報酬率","permalink":"https://koreal6803.github.io/tags/自由現金報酬率/"}]},{"title":"策略狗。績優股獵犬1。如何找到優質股？","slug":"策略狗。績優股獵犬1。如何找到優質股？","date":"2017-09-21T13:47:06.000Z","updated":"2017-10-03T14:59:27.000Z","comments":true,"path":"策略狗。績優股獵犬1。如何找到優質股？/","link":"","permalink":"https://koreal6803.github.io/策略狗。績優股獵犬1。如何找到優質股？/","excerpt":"最近財報狗出了一個新的功能：策略狗。\n來研究一下它最新公開的指標～","text":"最近財報狗出了一個新的功能：策略狗。 來研究一下它最新公開的指標～ 財報狗教大家如何打敗大盤，但滿貴的400＊12元要4800每年，優點是可以每年操作一次就好了，缺點是你一次就得買12個月！ 針對績優股的”自由現金報酬率”這個比較不常見的指標，想來做個研究。 什麼是自由現金呢？這邊我就直接複製策略狗的教學： 投資資本 = 股東權益 + 長短期金融借款自由現金流 = 營業現金流 - 資本支出自由現金報酬率 = 自由現金流 / 投資資本 既然策略狗告訴我：取”自由現金報酬率”高的股票，買一年會漲的機率較高。我進一步想要分析的是，假如只買一個月會如何呢？ 於是做了一個相關性的比較 以原點(0,0)可以將這張圖表分成上下左右四個象現，此圖的左右，代表任意買入一個月是否獲利，正的是股價上漲，負的是下跌。此圖的上下，代表”自由現金流報酬率”的高低。 很對稱…沒什麼相關性，可以能是一個月還太快，畢竟這個指標是用於長期投資，一個月的漲跌還太短了。但可以發現，在圖的下半部，股價比較容易發散，而上半部股價比較集中，這是一個有趣的現象： “自由現金流報酬率”高的股票，似乎短時間（單月）內不易大起大落。 那把一個月調整一季、半年、一年，對獲利又帶來什麼影響呢？下一篇再告訴大家。 我每天都會放一篇跟選股有關的新文章，假如你覺得FinLab對你有幫助，可以偶爾來追蹤一下～","raw":null,"content":null,"categories":[{"name":"量化投資","slug":"量化投資","permalink":"https://koreal6803.github.io/categories/量化投資/"}],"tags":[{"name":"策略狗","slug":"策略狗","permalink":"https://koreal6803.github.io/tags/策略狗/"},{"name":"自由現金報酬率","slug":"自由現金報酬率","permalink":"https://koreal6803.github.io/tags/自由現金報酬率/"}]},{"title":"如何戰勝惰性？","slug":"每天至少寫一行","date":"2017-09-20T11:09:42.000Z","updated":"2017-09-29T12:56:11.000Z","comments":true,"path":"每天至少寫一行/","link":"","permalink":"https://koreal6803.github.io/每天至少寫一行/","excerpt":"如何持續運動不中斷？跨年的願望完成了沒？說好每天背英文單字呢？\n這些都需要毅力，我所沒有的毅力。\n然而，最近聽到好友說的話，讓我有點頓悟！","text":"如何持續運動不中斷？跨年的願望完成了沒？說好每天背英文單字呢？ 這些都需要毅力，我所沒有的毅力。 然而，最近聽到好友說的話，讓我有點頓悟！ 其實我們不需要有毅力，我們需要拆解任務的能力。 讓我來說明一下，通常一個任務(task)，跟我的毅力(willpower)可以量化的話，會是這樣子：任務與毅力12task = 100 # 任務willpower = 5 # 毅力別懷疑，我的毅力真的很薄弱。 但沒關係，我們將任務分解成很小塊的子任務(subtask)：分解任務123subtask = taskwhile (subtask &gt; willpower) subtask /= 2秘訣就在這！要分解到一個你覺得可笑的地步，例如： 一天一下仰臥起做 一天寫一行部落格 一天花一小時研究 一定要夠可笑，才會成功。 重點不在於做的多或少，而是在於你是否開始做。很多事情痛苦的是靜摩擦力，後面就輕鬆了！ 一天一下仰臥起做：都做一下了怎麼可能不多做幾下。 一天寫一行部落格：你看我今天都寫多少行了。 一天作一小時研究：0.0 聽起來不錯 每天會有額外的動力去多做一點，甚至很多點每天的任務123progress = 0while(progress &lt; task) progress += subtask + random.randint(0, 10*subtask) 所以，我給自己的標準是：每天寫一行部落格，就好了！","raw":null,"content":null,"categories":[{"name":"生活","slug":"生活","permalink":"https://koreal6803.github.io/categories/生活/"}],"tags":[{"name":"生活","slug":"生活","permalink":"https://koreal6803.github.io/tags/生活/"},{"name":"一行","slug":"一行","permalink":"https://koreal6803.github.io/tags/一行/"}]},{"title":"立誓：每天都寫吧！","slug":"立誓：每天都寫吧！","date":"2017-09-19T18:14:58.000Z","updated":"2017-09-22T22:56:40.000Z","comments":true,"path":"立誓：每天都寫吧！/","link":"","permalink":"https://koreal6803.github.io/立誓：每天都寫吧！/","excerpt":"","text":"橘色的夕陽說明今天又結束了。 還有一年365個夜晚可以浪費，但就這麼浪費太可惜了，還是來做些什麼吧！ 於是開始了，希望不要半途而廢的旅程！ Hello World1print(\"Hello world!\")","raw":null,"content":null,"categories":[{"name":"生活","slug":"生活","permalink":"https://koreal6803.github.io/categories/生活/"}],"tags":[{"name":"生活","slug":"生活","permalink":"https://koreal6803.github.io/tags/生活/"}]}]}